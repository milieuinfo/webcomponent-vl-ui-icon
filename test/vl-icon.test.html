<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <script src="../../@webcomponents/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <script type="module" src="../vl-icon.src.js"></script>
</head>

<body>
    <test-fixture id="vl-icon-fixture">
        <template>
            <vl-icon></vl-icon>
        </template>
    </test-fixture>

    <test-fixture id="vl-icon-fixture-deg">
        <template>
            <vl-icon 90deg></vl-icon>
            <vl-icon 180deg></vl-icon>
        </template>
    </test-fixture>

    <script>
        suite('<vl-icon>', () => {
            const should = chai.should();

            test('bevat span met juiste icon class', () => {
                const icon = fixture('vl-icon-fixture');
                const iconName = "calendar";
                icon.setAttribute('icon', iconName);
                assert.isTrue(icon.shadowRoot.querySelector("span").classList.contains("vl-vi-" + iconName))
            });

            test('bevat span met juiste size class', () => {
                const icon = fixture('vl-icon-fixture');
                ['small', 'large'].forEach((iconSize) => {
                    icon.setAttribute('size', iconSize);
                    assert.isTrue(icon.shadowRoot.querySelector("span").classList.contains("vl-icon--" + iconSize));
                });

                const iconSize = 'bla';
                icon.setAttribute('size', iconSize);
                assert.isFalse(icon.shadowRoot.querySelector("span").classList.contains("vl-icon--" + iconSize));
            });

            test('ondersteunt 90 en 180 graden rotatie', () => {
                const icon = fixture('vl-icon-fixture-deg');
                assert.isTrue(icon[0].shadowRoot.querySelector("span").classList.contains("vl-vi-u-90deg"));
                assert.isTrue(icon[1].shadowRoot.querySelector("span").classList.contains("vl-vi-u-180deg"));
            });

            test('krijgt de juiste class wanneer het icon een attribuut bevat', () => {
                const icon = fixture('vl-icon-fixture');
                const spanElement = icon.shadowRoot.querySelector("span");
                ['before', 'after', 'light'].forEach((attribuut) => {
                    assert.isFalse(spanElement.classList.contains('vl-icon--' + attribuut));
                    icon.setAttribute(attribuut, '');
                    assert.isTrue(spanElement.classList.contains('vl-icon--' + attribuut));
                    icon.removeAttribute(attribuut);
                    assert.isFalse(spanElement.classList.contains('vl-icon--' + attribuut));
                });
            });
        });
    </script>
</body>

</html>